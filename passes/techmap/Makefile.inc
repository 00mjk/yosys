
OBJS += passes/techmap/techmap.o
OBJS += passes/techmap/simplemap.o
OBJS += passes/techmap/dfflibmap.o
OBJS += passes/techmap/iopadmap.o
OBJS += passes/techmap/hilomap.o
OBJS += passes/techmap/libparse.o
OBJS += passes/techmap/extract.o

GENFILES += passes/techmap/stdcells.inc

passes/techmap/stdcells.inc: techlibs/common/stdcells.v
	echo "// autogenerated from $<\n" > $@.new
	echo "static char stdcells_code[] = {" >> $@.new
	for c in `od -v -td1 -An $<` ; do echo " $$c," >> $@.new ; done
	echo " 0 };" >> $@.new
	fmt $@.new > $@
	rm -f $@.new

passes/techmap/techmap.o: passes/techmap/stdcells.inc

TARGETS += yosys-filterlib
GENFILES += passes/techmap/filterlib.o

yosys-filterlib: passes/techmap/filterlib.o
	$(CXX) -o yosys-filterlib $(LDFLAGS) $^ $(LDLIBS)

